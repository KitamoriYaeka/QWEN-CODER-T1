<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>苹果切割动画</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #6dd5ed, #2193b0);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
        }
        
        .container {
            width: 390px; /* iPhone 12宽度 */
            height: 844px; /* iPhone 12高度 */
            position: relative;
            perspective: 1000px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 40px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        
        .scene {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.5s ease;
        }
        
        .apple-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200px;
            height: 200px;
            cursor: grab;
        }
        
        .apple-container:active {
            cursor: grabbing;
        }
        
        .apple {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 1s ease;
        }
        
        .apple-whole {
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 30% 30%, #ff6b6b, #ee5a52);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            box-shadow: inset -10px -10px 20px rgba(0, 0, 0, 0.2),
                        0 5px 15px rgba(0, 0, 0, 0.3);
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .apple-stem {
            position: absolute;
            top: -15px;
            width: 8px;
            height: 15px;
            background: #8B4513;
            border-radius: 4px 4px 0 0;
            z-index: 10;
        }
        
        .apple-leaf {
            position: absolute;
            top: -12px;
            left: 5px;
            width: 12px;
            height: 8px;
            background: #2ECC71;
            border-radius: 50% 0 50% 50%;
            transform: rotate(20deg);
        }
        
        .step-indicator {
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            text-align: center;
            color: white;
            font-size: 18px;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
            z-index: 100;
        }
        
        .controls {
            position: absolute;
            bottom: 20px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 10px;
            z-index: 100;
        }
        
        .btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid white;
            border-radius: 25px;
            color: white;
            font-size: 14px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }
        
        .apple-cut-3, .apple-cut-8 {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease;
        }
        
        .slice {
            position: absolute;
            background: radial-gradient(circle at 30% 30%, #ff7b7b, #ee6a62);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            box-shadow: inset -5px -5px 10px rgba(0, 0, 0, 0.2),
                        0 3px 8px rgba(0, 0, 0, 0.3);
        }
        
        /* 三分苹果样式 */
        .slice-3-1 { top: 0; left: 0; width: 50%; height: 50%; border-radius: 0 100% 0 0 / 0 100% 0 0; }
        .slice-3-2 { top: 0; right: 0; width: 50%; height: 50%; border-radius: 100% 0 0 0 / 100% 0 0 0; }
        .slice-3-3 { bottom: 0; left: 0; width: 100%; height: 50%; border-radius: 0 0 50% 50% / 0 0 100% 100%; }
        
        /* 八分苹果样式 */
        .slice-8-1 { top: 0; left: 0; width: 25%; height: 25%; border-radius: 0 100% 0 0 / 0 100% 0 0; }
        .slice-8-2 { top: 0; left: 25%; width: 25%; height: 25%; border-radius: 100% 0 0 0 / 100% 0 0 0; }
        .slice-8-3 { top: 0; right: 25%; width: 25%; height: 25%; border-radius: 0 0 0 100% / 0 0 0 100%; }
        .slice-8-4 { top: 0; right: 0; width: 25%; height: 25%; border-radius: 0 0 100% 0 / 0 0 100% 0; }
        .slice-8-5 { top: 25%; left: 0; width: 25%; height: 25%; border-radius: 0 0 100% 0 / 0 0 100% 0; }
        .slice-8-6 { top: 25%; right: 0; width: 25%; height: 25%; border-radius: 100% 0 0 0 / 100% 0 0 0; }
        .slice-8-7 { bottom: 0; left: 0; width: 25%; height: 25%; border-radius: 0 100% 0 0 / 0 100% 0 0; }
        .slice-8-8 { bottom: 0; right: 0; width: 25%; height: 25%; border-radius: 0 0 0 100% / 0 0 0 100%; }
        
        .stem-fragment {
            position: absolute;
            background: #8B4513;
            border-radius: 4px;
            z-index: 10;
        }
        
        .instructions {
            position: absolute;
            top: 60px;
            left: 0;
            right: 0;
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            padding: 0 20px;
            z-index: 100;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="scene" id="scene">
            <div class="step-indicator" id="stepIndicator">完整苹果</div>
            <div class="instructions" id="instructions">拖拽旋转视角 | 点击按钮查看切割过程</div>
            
            <div class="apple-container" id="appleContainer">
                <div class="apple" id="apple">
                    <!-- 完整苹果 -->
                    <div class="apple-whole" id="appleWhole">
                        <div class="apple-stem"></div>
                        <div class="apple-leaf"></div>
                    </div>
                    
                    <!-- 三分苹果 -->
                    <div class="apple-cut-3" id="appleCut3">
                        <div class="slice slice-3-1">
                            <div class="apple-stem stem-fragment" style="top: -8px; left: 5px; width: 5px; height: 8px;"></div>
                        </div>
                        <div class="slice slice-3-2">
                        </div>
                        <div class="slice slice-3-3">
                        </div>
                    </div>
                    
                    <!-- 八分苹果 -->
                    <div class="apple-cut-8" id="appleCut8">
                        <div class="slice slice-8-1">
                            <div class="apple-stem stem-fragment" style="top: -5px; left: 3px; width: 3px; height: 5px;"></div>
                        </div>
                        <div class="slice slice-8-2"></div>
                        <div class="slice slice-8-3"></div>
                        <div class="slice slice-8-4"></div>
                        <div class="slice slice-8-5"></div>
                        <div class="slice slice-8-6"></div>
                        <div class="slice slice-8-7"></div>
                        <div class="slice slice-8-8"></div>
                    </div>
                </div>
            </div>
            
            <div class="controls">
                <button class="btn" id="step1Btn">完整苹果</button>
                <button class="btn" id="step2Btn">切成三分</button>
                <button class="btn" id="step3Btn">切成八块</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const scene = document.getElementById('scene');
            const appleContainer = document.getElementById('appleContainer');
            const apple = document.getElementById('apple');
            const appleWhole = document.getElementById('appleWhole');
            const appleCut3 = document.getElementById('appleCut3');
            const appleCut8 = document.getElementById('appleCut8');
            const stepIndicator = document.getElementById('stepIndicator');
            const instructions = document.getElementById('instructions');
            const step1Btn = document.getElementById('step1Btn');
            const step2Btn = document.getElementById('step2Btn');
            const step3Btn = document.getElementById('step3Btn');
            
            let currentStep = 0;
            let isDragging = false;
            let startX, startY;
            let rotateX = 0, rotateY = 0;
            let startRotateX, startRotateY;
            
            // 拖拽旋转功能
            appleContainer.addEventListener('mousedown', startDrag);
            appleContainer.addEventListener('touchstart', startDragTouch, { passive: false });
            
            function startDrag(e) {
                isDragging = true;
                startX = e.clientX;
                startY = e.clientY;
                startRotateX = rotateX;
                startRotateY = rotateY;
                appleContainer.style.cursor = 'grabbing';
                e.preventDefault();
            }
            
            function startDragTouch(e) {
                if (e.touches.length === 1) {
                    isDragging = true;
                    startX = e.touches[0].clientX;
                    startY = e.touches[0].clientY;
                    startRotateX = rotateX;
                    startRotateY = rotateY;
                    appleContainer.style.cursor = 'grabbing';
                    e.preventDefault();
                }
            }
            
            document.addEventListener('mousemove', drag);
            document.addEventListener('touchmove', dragTouch, { passive: false });
            
            function drag(e) {
                if (!isDragging) return;
                const deltaX = e.clientX - startX;
                const deltaY = e.clientY - startY;
                
                rotateY = startRotateY + deltaX * 0.5;
                rotateX = startRotateX - deltaY * 0.5;
                
                // 限制X轴旋转角度
                rotateX = Math.max(-90, Math.min(90, rotateX));
                
                updateRotation();
                e.preventDefault();
            }
            
            function dragTouch(e) {
                if (!isDragging || e.touches.length !== 1) return;
                const deltaX = e.touches[0].clientX - startX;
                const deltaY = e.touches[0].clientY - startY;
                
                rotateY = startRotateY + deltaX * 0.5;
                rotateX = startRotateX - deltaY * 0.5;
                
                // 限制X轴旋转角度
                rotateX = Math.max(-90, Math.min(90, rotateX));
                
                updateRotation();
                e.preventDefault();
            }
            
            document.addEventListener('mouseup', endDrag);
            document.addEventListener('touchend', endDrag);
            
            function endDrag() {
                isDragging = false;
                appleContainer.style.cursor = 'grab';
            }
            
            function updateRotation() {
                scene.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
            }
            
            // 步骤控制
            function showStep(step) {
                currentStep = step;
                
                appleWhole.style.opacity = step === 0 ? '1' : '0';
                appleCut3.style.opacity = step === 1 ? '1' : '0';
                appleCut8.style.opacity = step === 2 ? '1' : '0';
                
                switch(step) {
                    case 0:
                        stepIndicator.textContent = '完整苹果';
                        instructions.textContent = '拖拽旋转视角 | 点击按钮查看切割过程';
                        break;
                    case 1:
                        stepIndicator.textContent = '切成三分';
                        instructions.textContent = '拖拽旋转查看各个部分';
                        break;
                    case 2:
                        stepIndicator.textContent = '切成八块';
                        instructions.textContent = '拖拽旋转查看所有块状';
                        break;
                }
            }
            
            step1Btn.addEventListener('click', () => showStep(0));
            step2Btn.addEventListener('click', () => showStep(1));
            step3Btn.addEventListener('click', () => showStep(2));
            
            // 初始化
            showStep(0);
            
            // 自动旋转效果（可选）
            let autoRotate = true;
            setInterval(() => {
                if (currentStep === 0 && !isDragging && autoRotate) {
                    rotateY += 0.5;
                    updateRotation();
                }
            }, 50);
            
            // 点击任意地方停止自动旋转
            document.addEventListener('click', () => {
                autoRotate = false;
            });
        });
    </script>
</body>
</html>